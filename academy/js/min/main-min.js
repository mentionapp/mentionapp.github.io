$(document).ready(function(){function e(e){var a=/^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;return a.test(e)?!0:!1}function a(){var e=$(window).scrollTop(),a=$(".ac__ctas-anchor").offset().top;e>a?$(".ac__first-cta").addClass("stick"):$(".ac__first-cta").removeClass("stick")}var o=document.referrer,i="twitter";$(".ac__cta--main").click(function(a){var o=$(".ac__mail--main").val();0===$.trim(o).length&&(alert("Please enter valid email address"),$(".ac__mail--main").addClass("border-is-red"),a.preventDefault()),e(o)?(a.preventDefault(),$(".ac__form--success .ac__form").toggleClass("hidden")):(alert("Invalid Email Address"),$(".ac__mail--main").addClass("border-is-red"),a.preventDefault())}),window.onload=function(){o.indexOf(i)>-1?(console.log("twitter, change form"),$(".ac__form--twitter").toggleClass("hidden"),$(".ac__form--default").toggleClass("hidden")):console.log("no-ref, do nothing")},$(".ac__mail--main").focusout(function(){var e=$(".ac__form"),a=analytics.user().anonymousId();if(o.indexOf(i)>-1){console.log("twitter, get augur for twitter");var n=$(".ac__mail--main").val();window.augurAPI="http://api.augur.io/v2/user?key=ikxxvks77804a1n8a37dn0pt088q00qf&twitter_handle="+n,$.getJSON(augurAPI).done(function(e){console.log("got data"),console.log(e.DEMOGRAPHICS.gender[0].score),console.log("begin identify 1"),analytics.identify(""+a,{twitter:n}),console.log("begin identify 2"),properties={email:e.PRIVATE.email[0].value,name:e.PRIVATE.name[0].value,gender:e.DEMOGRAPHICS.gender[0].value,location:e.GEOGRAPHICS.location[0].value,linkedin:e.PROFILES.linkedin_handle[0].value},void 0!==e.PRIVATE.bio&&e.PRIVATE.bio.length>0&&(properties.bioTwitter=e.PRIVATE.bio[0].value),analytics.identify(""+n,properties),console.log("begin track"),analytics.track("Registered for academy"),console.log("end")}).fail(function(){console.log("failed to get json from augur API")})}else{console.log("no-ref, get augur for email");var t=$(".ac__mail--main").val();window.augurAPI="http://api.augur.io/v2/user?key=ikxxvks77804a1n8a37dn0pt088q00qf&email="+t,$.getJSON(augurAPI).done(function(e){console.log("got data"),console.log(e.DEMOGRAPHICS.gender[0].score),console.log("begin identify 1"),analytics.identify(""+a,{email:t}),console.log("begin identify 2"),properties={email:t,name:e.PRIVATE.name[0].value,gender:e.DEMOGRAPHICS.gender[0].value,location:e.GEOGRAPHICS.location[0].value,twitter:e.PROFILES.twitter_handle[0].value,linkedin:e.PROFILES.linkedin_handle[0].value},void 0!==e.PRIVATE.bio&&e.PRIVATE.bio.length>0&&(properties.bioTwitter=e.PRIVATE.bio[0].value),analytics.identify(""+t,properties),console.log("begin track"),analytics.track("Registered for academy"),console.log("end")}).fail(function(){console.log("failed to get json from augur API")})}}),$(function(){$(window).scroll(a),a()})});