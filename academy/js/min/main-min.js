$(document).ready(function(){function e(e){var o=/^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;return o.test(e)?!0:!1}var o=document.referrer,n="twitter";$(".ac__submit").click(function(o){var n=$(".ac__input").val();0===$.trim(n).length&&(alert("Please enter valid email address"),$(".ac__input").addClass("border-is-red"),o.preventDefault()),e(n)?(o.preventDefault(),$(".ac__form--success .ac__form").toggleClass("hidden")):(alert("Invalid Email Address"),$(".ac__input").addClass("border-is-red"),o.preventDefault())}),window.onload=function(){o.indexOf(n)>-1?(console.log("twitter, change form"),$(".ac__form--twitter").toggleClass("hidden"),$(".ac__form--default").toggleClass("hidden")):console.log("no-ref, do nothing")},$(".ac__input").focusout(function(){var e=$(".ac__form"),a=analytics.user().anonymousId();if(o.indexOf(n)>-1){console.log("twitter, get augur for twitter");var i=$(".ac__input").val();window.augurAPI="http://api.augur.io/v2/user?key=ikxxvks77804a1n8a37dn0pt088q00qf&twitter_handle="+i,$.getJSON(augurAPI).done(function(e){console.log("got data"),console.log(e.DEMOGRAPHICS.gender[0].score),console.log("begin identify 1"),analytics.identify(""+a,{twitter:i}),console.log("begin identify 2"),properties={email:e.PRIVATE.email[0].value,name:e.PRIVATE.name[0].value,gender:e.DEMOGRAPHICS.gender[0].value,location:e.GEOGRAPHICS.location[0].value,linkedin:e.PROFILES.linkedin_handle[0].value},void 0!==e.PRIVATE.bio&&e.PRIVATE.bio.length>0&&(properties.bioTwitter=e.PRIVATE.bio[0].value),analytics.identify(""+i,properties),console.log("begin track"),analytics.track("Registered for academy"),console.log("end")}).fail(function(){console.log("failed to get json from augur API")})}else{console.log("no-ref, get augur for email");var t=$(".ac__input").val();window.augurAPI="http://api.augur.io/v2/user?key=ikxxvks77804a1n8a37dn0pt088q00qf&email="+t,$.getJSON(augurAPI).done(function(e){console.log("got data"),console.log(e.DEMOGRAPHICS.gender[0].score),console.log("begin identify 1"),analytics.identify(""+a,{email:t}),console.log("begin identify 2"),properties={email:t,name:e.PRIVATE.name[0].value,gender:e.DEMOGRAPHICS.gender[0].value,location:e.GEOGRAPHICS.location[0].value,twitter:e.PROFILES.twitter_handle[0].value,linkedin:e.PROFILES.linkedin_handle[0].value},void 0!==e.PRIVATE.bio&&e.PRIVATE.bio.length>0&&(properties.bioTwitter=e.PRIVATE.bio[0].value),analytics.identify(""+t,properties),console.log("begin track"),analytics.track("Registered for academy"),console.log("end")}).fail(function(){console.log("failed to get json from augur API")})}})});